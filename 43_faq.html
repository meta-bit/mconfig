<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://meta-bit.github.io/mconfig/43_faq.html" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>4.3 FAQ - mConfig Documentation</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "4.3 FAQ";
        var mkdocs_page_input_path = "43_faq.md";
        var mkdocs_page_url = "/mconfig/43_faq.html";
      </script>
    
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="index.html" class="icon icon-home"> mConfig Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="index.html">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Part 1 Introduction & Basics</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="11_what_is_mconfig.html">1.1 What is mConfig?</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="12_features_and_use_cases.html">1.2 Features and Use Cases</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="13_getting_started.html">1.3 Getting Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="14_regular_use.html">1.4 Regular Use</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="15_test_mode.html">1.5 Test Mode</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Part 2 Core Concepts</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="21_how_it_works.html">2.1 How it Works</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="22_priorities_and_hierarchies.html">2.2 Priorities and Hierarchies</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="23_configuration_schemes.html">2.3 Configuration Schemes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="24_comment_handling.html">2.4 Comment Handling</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="25_config_features.html">2.5 Config Features</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Part 3 Advanced Topics</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="31_writing_configurations.html">3.1 Writing Configurations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="32_updates.html">3.2 Updates</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="33_getting_information.html">3.3 Getting Information</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="34_definitions_and_valid_values.html">3.4 Definitions and Valid Values</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="35_handling_secrets.html">3.5 Handling Secrets</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="36_windows_registry.html">3.6 Windows Registry Access</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="37_extensions_and_advanced_use.html">3.7 Extensions and Advanced Use</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="38_code_improvements.html">3.8 Code Improvements</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Part 4 Reference & Project</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="41_mconfig_tool.html">4.1 mConfig Tool</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="42_logging.html">4.2 Logging</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">4.3 FAQ</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#431-i-want-to">4.3.1 I want to...</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#i-want-to-extract-a-subconfiguration-to-a-properties-object">I want to extract a subconfiguration to a Properties object.</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#i-want-to-know-where-my-configuration-files-are-located">I want to know where my configuration files are located.</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#432-why-is">4.3.2 Why is...</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#why-cant-i-state-my-defaults-right-at-the-place-im-asking-for-the-value">Why can't I state my defaults right at the place I'm asking for the value?</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#433-how-can-i-fix">4.3.3 How can I fix...</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#quick-verification-checklist">Quick Verification Checklist</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#updates-to-config-files-are-not-detected">Updates to config files are not detected</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#jpms-module-access-errors">JPMS Module Access Errors</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#config-values-always-returning-defaults-or-null">Config values always returning defaults or null</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#tests-not-loading-expected-configurations">Tests not loading expected configurations</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#no-mconfig-logging-output">No mConfig logging output</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#environment-variables-dont-provide-config-values">Environment variables don't provide config values</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="44_design_consolidated.html">4.4 Design Consolidated</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="45_ai_guidance.html">4.5 AI Guidance</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="46_versions.html">4.6 Versions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="47_contributing.html">4.7 Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="48_legal.html">4.8 Legal</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Examples</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="examples/index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/simple_configuration_loading.html">Simple Configuration Loading</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/advanced_configuration_handling.html">Advanced Configuration Handling</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/integration_with_cicd.html">Integration with CI/CD</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/testing_configurations.html">Testing Configurations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/mconfig-modules.html">mConfig Modules</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/java-modules.html">JPMS (Java Modules)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/configuration_views.html">Configuration Views</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/zookeeper.html">ZooKeeper</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/handling_crypto_keys_and_certificates.html">Handling Crypto Keys and Certificates</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/schemes.html">Schemes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Appendix</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="49_links.html">4.9 Links</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">mConfig Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html" class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Part 4 Reference & Project</li>
      <li class="breadcrumb-item active">4.3 FAQ</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="43-faq-frequently-asked-questions">4.3 FAQ - Frequently Asked Questions<a class="headerlink" href="#43-faq-frequently-asked-questions" title="Permanent link">&para;</a></h1>
<h2 id="431-i-want-to">4.3.1 I want to...<a class="headerlink" href="#431-i-want-to" title="Permanent link">&para;</a></h2>
<h3 id="i-want-to-extract-a-subconfiguration-to-a-properties-object">I want to extract a subconfiguration to a Properties object.<a class="headerlink" href="#i-want-to-extract-a-subconfiguration-to-a-properties-object" title="Permanent link">&para;</a></h3>
<p>If your configuration contains a subset of entries, say, for an existing Java
component which expects them that way, and you just want to get an pass them
on,</p>
<p>then 
<code>ConfigUtil.copyPrefixedEntriesToJavaProperties()</code> is what should help you.</p>
<p>You specify the prefix, including possible "." from the hierarchy,
and get a java.util.Properties instance with all the contents from the Configuration
which start with the prefix. The prefix is removed automatically.</p>
<p>Caveat: This will skip configuration layers where the source does not allow
enumeration of its contents. So the result of this call may yield results
different from what you'd get if you were using the Configuration itself!</p>
<p>Recommendation: If that subconfig can be limited in what it may and should contain,
please consider using a ConfigScheme (in addition, or instead).</p>
<p>Also, have a look at other methods in the ConfigUtil class, for similar use cases.</p>
<h3 id="i-want-to-know-where-my-configuration-files-are-located">I want to know where my configuration files are located.<a class="headerlink" href="#i-want-to-know-where-my-configuration-files-are-located" title="Permanent link">&para;</a></h3>
<p>Use the mConfigTool provided.
It can tell you the general search paths (potential locations),
as well as the actual locations of the files it found,
and where the values in individual entries come from.</p>
<h2 id="432-why-is">4.3.2 Why is...<a class="headerlink" href="#432-why-is" title="Permanent link">&para;</a></h2>
<h3 id="why-cant-i-state-my-defaults-right-at-the-place-im-asking-for-the-value">Why can't I state my defaults right at the place I'm asking for the value?<a class="headerlink" href="#why-cant-i-state-my-defaults-right-at-the-place-im-asking-for-the-value" title="Permanent link">&para;</a></h3>
<p>This approach sounds simpler - <code>getInteger("weightInTons",5)</code> looks good at first sight.
Until you realize what happens when you ask for this value a second time, or a third...
Also, this prevents you from generating a proper documentation of your configuration parameters.</p>
<p>ConfigSchemes should not be hard to use. Try them, please.</p>
<p>But if you insist on using the old way, 
there is the mConfigCheese module - for those who like their code a bit pungent.</p>
<h2 id="433-how-can-i-fix">4.3.3 How can I fix...<a class="headerlink" href="#433-how-can-i-fix" title="Permanent link">&para;</a></h2>
<h3 id="quick-verification-checklist">Quick Verification Checklist<a class="headerlink" href="#quick-verification-checklist" title="Permanent link">&para;</a></h3>
<p>If it's not working yet:</p>
<ol>
<li>
<p><strong>Place a test config file:</strong>
   Create <code>~/.config/myCompany/myApplication/network.properties</code> (Linux/Mac) or <code>%APPDATA%\myCompany\myApplication\network.properties</code> (Windows):
   <code>peer = localhost
   port = 8080
   probability = 0.5</code></p>
</li>
<li>
<p><strong>List discovered configs:</strong>
   <code>java
   try (ConfigFactory factory = ConfigFactoryBuilder.create("myCompany", "myApplication").build()) {
       factory.listAvailableConfigurations().forEach(System.out::println);
   }</code></p>
</li>
<li>
<p><strong>Enable logging:</strong> Add <code>mConfigLoggingSlf4j</code> dep + SLF4J config (see <a href="#no-mconfig-logging-output">No mConfig logging output</a> below).</p>
</li>
<li>
<p><strong>Use mConfigTool CLI:</strong> <code>mconfig myCompany:myApplication get network.peer -v</code> (requires building mConfigTools; see <a href="../../../../mConfigTools/README.md">mConfigTools README</a>).</p>
</li>
<li>
<p><strong>See detailed troubleshooting sections below.</strong></p>
</li>
</ol>
<h3 id="updates-to-config-files-are-not-detected">Updates to config files are not detected<a class="headerlink" href="#updates-to-config-files-are-not-detected" title="Permanent link">&para;</a></h3>
<ol>
<li>You are not buffering the results in some local variables, are you?
<br/>
Your own variables are not updated by mConfig.
Ask the Configuration object for the value instead whenever you need it.</li>
<li>Are the directories and files accessible for the account the program runs as?
mConfig needs to be able to list directory contents and read config files;
inaccessible dirs and files cause debug messages at most, but no error.</li>
<li>The cache setting doesn't match with your expected reaction time.
For efficiency, files are not checked and re-read on every config value access.
There is a delay between checks. If the default value (2 seconds) is too long
for your purposes, you can change it. @TODO name the config settings key.
Keep in mind a higher update frequency increases overhead.</li>
<li>Is the format supported?
You can choose and combine mconfig Format modules; if the file extension pattern
of the config file does not match with a file format present in your
current build, it won't be read.</li>
</ol>
<h3 id="jpms-module-access-errors">JPMS Module Access Errors<a class="headerlink" href="#jpms-module-access-errors" title="Permanent link">&para;</a></h3>
<p>If your application uses JPMS (named <code>module-info.java</code>) but omits <code>requires</code> for mConfig modules, you will see access errors.</p>
<p><strong>Compile-time (javac):</strong></p>
<pre><code>cannot access metabit.mconfig.core.ConfigFactory
  module your.module does not read module metabit.mconfig.core
</code></pre>
<p><strong>Runtime (java):</strong></p>
<pre><code>java.lang.IllegalAccessError: class your.package.YourClass cannot access class metabit.mconfig.core.ConfigFactory (in module metabit.mconfig.core) because module your.module does not read module metabit.mconfig.core
</code></pre>
<p><strong>Fix:</strong>
Add the required <code>requires</code> directives to your <code>module-info.java</code>.</p>
<p>The list depends on the mConfig variant:</p>
<ul>
<li><a href="../../../../mConfigFull/README.md">mConfigFull</a> (JPMS <code>requires</code> section)</li>
<li><a href="../../../../mConfigStandard/README.md">mConfigStandard</a> (JPMS <code>requires</code> section)</li>
</ul>
<p>See also <a href="examples/java-modules.html">JPMS introduction</a>.</p>
<h3 id="config-values-always-returning-defaults-or-null">Config values always returning defaults or null<a class="headerlink" href="#config-values-always-returning-defaults-or-null" title="Permanent link">&para;</a></h3>
<p><strong>Symptoms:</strong> Calls like <code>cfg.getString("key")</code> return <code>null</code> or scheme defaults; no exceptions or warnings.</p>
<p><strong>Common causes:</strong>
- Mismatched <code>company</code>, <code>application</code>, or <code>configName</code> (case-sensitive).
- No config files in standard locations (classpath <code>src/main/resources/.config/&lt;company&gt;/&lt;app&gt;/&lt;configName&gt;.properties</code> or filesystem equivalents).
- File extension not matching available formats (e.g., <code>.yaml</code> without YAML format module).
- Permissions issues on directories/files (check logs).</p>
<p><strong>Fix steps:</strong>
1. Use <code>factory.listAvailableConfigurations()</code> to list discovered configs and their sources.
2. Run <a href="../../../../mConfigTools/README.md">mConfigTool</a> CLI for full diagnostics: paths searched, files found, entry origins.
3. Verify placements per <a href="13_getting_started.html">Getting Started</a>.
4. Add missing format modules (e.g., <code>mConfigFormatYAMLwithJackson</code> for YAML).</p>
<h3 id="tests-not-loading-expected-configurations">Tests not loading expected configurations<a class="headerlink" href="#tests-not-loading-expected-configurations" title="Permanent link">&para;</a></h3>
<p><strong>Symptoms:</strong> Unit/integration tests use production defaults or empty configs despite <code>setTestMode(true)</code>.</p>
<p><strong>Causes:</strong>
- Missing <code>ConfigFactoryBuilder.setTestMode(true)</code> before <code>build()</code>.
- Test files not in correct locations.
- <code>forbidTestMode()</code> called or <code>PERMIT_TEST_MODE=false</code>.</p>
<p><strong>Fix:</strong>
1. Add <code>@BeforeAll static void setup() { ConfigFactoryBuilder.setTestMode(true); }</code>
2. Place files in:
   - <code>src/test/resources/.config/&lt;company&gt;/&lt;app&gt;/&lt;configName&gt;.ext</code> (preferred)
   - <code>src/test/resources/config/&lt;SCOPE&gt;</code> (e.g., <code>USER</code>)
3. Custom: <code>ConfigFactoryBuilder.setFeature(ConfigFeature.TESTMODE_DIRECTORIES, List.of("USER:src/test/configs"));</code>
4. See full details in <a href="15_test_mode.html">Test Mode</a>.</p>
<h3 id="no-mconfig-logging-output">No mConfig logging output<a class="headerlink" href="#no-mconfig-logging-output" title="Permanent link">&para;</a></h3>
<p><strong>Symptoms:</strong> Silent on config discovery, errors, or debug info.</p>
<p><strong>Fix:</strong>
1. Add dependency: <code>mConfigLoggingSlf4j</code>.
2. Configure SLF4J backend (e.g., Logback <code>logback.xml</code>):
   <code>xml
   &lt;logger name="metabit.config" level="DEBUG"/&gt;</code>
3. Ensure SLF4J implementation (logback-classic, log4j-slf4j) on classpath.
See <a href="42_logging.html">Logging</a>.</p>
<h3 id="environment-variables-dont-provide-config-values">Environment variables don't provide config values<a class="headerlink" href="#environment-variables-dont-provide-config-values" title="Permanent link">&para;</a></h3>
<p><strong>Symptoms:</strong> Env vars like <code>myapp-network-peer=localhost</code> ignored.</p>
<p><strong>Fix:</strong>
1. Add <code>mConfigSourceEnvVar</code> dependency.
2. Use naming scheme: <code>&lt;application&gt;_&lt;configName&gt;_&lt;key&gt;</code> (lowercase, e.g., <code>myapp_network_peer</code>).
3. Scope: <code>SESSION</code> (overrides USER).
4. Verify via <code>mConfigTool</code> or enable logging.
See <a href="../../../../mConfigSourceEnvVar/README.md">mConfigSourceEnvVar README</a>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="42_logging.html" class="btn btn-neutral float-left" title="4.2 Logging"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="44_design_consolidated.html" class="btn btn-neutral float-right" title="4.4 Design Consolidated">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="42_logging.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="44_design_consolidated.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>var base_url = ".";</script>
    <script src="js/theme_extra.js"></script>
    <script src="js/theme.js"></script>
      <script src="search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
