<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://meta-bit.github.io/mconfig/14_regular_use.html" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>1.4 Regular Use - mConfig Documentation</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "1.4 Regular Use";
        var mkdocs_page_input_path = "14_regular_use.md";
        var mkdocs_page_url = "/mconfig/14_regular_use.html";
      </script>
    
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="index.html" class="icon icon-home"> mConfig Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="index.html">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Part 1 Introduction & Basics</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="11_what_is_mconfig.html">1.1 What is mConfig?</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="12_features_and_use_cases.html">1.2 Features and Use Cases</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="13_getting_started.html">1.3 Getting Started</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">1.4 Regular Use</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#141-providing-a-default-configuration-product-scope">1.4.1 Providing a default configuration (PRODUCT scope)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#142-configuration-schemes-discovery">1.4.2 Configuration Schemes Discovery</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#143-use-a-config-scheme">1.4.3 Use a config scheme</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1431-reasons">1.4.3.1 Reasons</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1432-normal-use">1.4.3.2 Normal use</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1433-explicit-setting">1.4.3.3 Explicit setting</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#144-runtime-dynamic-configurations">1.4.4 Runtime Dynamic Configurations</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#145-put-and-write">1.4.5 Put and write</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="15_test_mode.html">1.5 Test Mode</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Part 2 Core Concepts</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="21_how_it_works.html">2.1 How it Works</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="22_priorities_and_hierarchies.html">2.2 Priorities and Hierarchies</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="23_configuration_schemes.html">2.3 Configuration Schemes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="24_comment_handling.html">2.4 Comment Handling</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="25_config_features.html">2.5 Config Features</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Part 3 Advanced Topics</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="31_writing_configurations.html">3.1 Writing Configurations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="32_updates.html">3.2 Updates</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="33_getting_information.html">3.3 Getting Information</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="34_definitions_and_valid_values.html">3.4 Definitions and Valid Values</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="35_handling_secrets.html">3.5 Handling Secrets</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="36_windows_registry.html">3.6 Windows Registry Access</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="37_extensions_and_advanced_use.html">3.7 Extensions and Advanced Use</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="38_code_improvements.html">3.8 Code Improvements</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Part 4 Reference & Project</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="41_mconfig_tool.html">4.1 mConfig Tool</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="42_logging.html">4.2 Logging</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="43_faq.html">4.3 FAQ</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="44_design_consolidated.html">4.4 Design Consolidated</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="45_ai_guidance.html">4.5 AI Guidance</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="46_versions.html">4.6 Versions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="47_contributing.html">4.7 Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="48_legal.html">4.8 Legal</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Examples</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="examples/index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/simple_configuration_loading.html">Simple Configuration Loading</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/advanced_configuration_handling.html">Advanced Configuration Handling</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/integration_with_cicd.html">Integration with CI/CD</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/testing_configurations.html">Testing Configurations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/mconfig-modules.html">mConfig Modules</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/java-modules.html">JPMS (Java Modules)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/configuration_views.html">Configuration Views</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/zookeeper.html">ZooKeeper</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/handling_crypto_keys_and_certificates.html">Handling Crypto Keys and Certificates</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="examples/schemes.html">Schemes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Appendix</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="49_links.html">4.9 Links</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">mConfig Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html" class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Part 1 Introduction & Basics</li>
      <li class="breadcrumb-item active">1.4 Regular Use</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="14-regular-use">1.4 Regular Use<a class="headerlink" href="#14-regular-use" title="Permanent link">&para;</a></h1>
<h2 id="141-providing-a-default-configuration-product-scope">1.4.1 Providing a default configuration (PRODUCT scope)<a class="headerlink" href="#141-providing-a-default-configuration-product-scope" title="Permanent link">&para;</a></h2>
<p>The lowest-priority layer is <code>PRODUCT</code> scope. Defaults come from two places:
- <strong>ConfigScheme defaults</strong> (recommended for typed, documented defaults)
- <strong>JAR resources</strong> (optional: ship default config files inside the JAR)</p>
<p>For JAR resources, mConfig searches these paths (in order):
- <code>.config/[&lt;company&gt;/]&lt;application&gt;/&lt;configName&gt;.&lt;ext&gt;</code>
- <code>.config/&lt;application&gt;/&lt;configName&gt;.&lt;ext&gt;</code>
- <code>.config/&lt;configName&gt;.&lt;ext&gt;</code></p>
<p>In a Maven/Gradle project, place them here:
- <code>src/main/resources/.config/[&lt;company&gt;/]&lt;application&gt;/&lt;configName&gt;.&lt;ext&gt;</code> (production)
- <code>src/test/resources/.config/[&lt;company&gt;/]&lt;application&gt;/&lt;configName&gt;.&lt;ext&gt;</code> (tests)</p>
<blockquote>
<p><strong>Note</strong>: <code>&lt;company&gt;</code> optional; omitted if blank/null/whitespace. 
Normally, one should supply both company and application names.
(company, organization, vendor, etc - we use "company" here for brevity.)
While it is possible to omit the company name, it is not recommended.
Some environments may use no company name by convention, but developing multi-platform,</p>
</blockquote>
<p>ConfigScheme defaults are always part of the PRODUCT scope default layer. If you want schemes
to <em>replace</em> existing defaults rather than merge them, use <code>SCHEME_RESETS_DEFAULTS</code>.</p>
<p><strong>Note:</strong> JAR defaults are active when running from a JAR, but during development
the JAR source still reads resources from the classpath, so the same paths work in IDE runs.</p>
<h2 id="142-configuration-schemes-discovery">1.4.2 Configuration Schemes Discovery<a class="headerlink" href="#142-configuration-schemes-discovery" title="Permanent link">&para;</a></h2>
<p>Config Schemes (<code>*.scheme.json</code>) are automatically discovered from the <code>.config/</code> directory on the classpath.</p>
<ul>
<li><strong>Development Time:</strong> Both <code>src/main/resources/.config/</code> and <code>src/test/resources/.config/</code> are searched.</li>
<li><strong>Precedence:</strong> If a scheme for the same configuration name exists in both locations, the one found last by the <code>ClassLoader</code> takes precedence.</li>
<li><strong>Production vs Test:</strong> Unlike configuration data, schemes are not bypassed in <code>TEST_MODE</code>. Production schemes are always loaded from the classpath to ensure the configuration contract is maintained.</li>
</ul>
<p>Recommended: Place in the main resources only.
Schemes are a "contract" for the configurations,
so they should be valid both for testing and production.</p>
<p>Most IDE don't do the testing with JAR files, they run class files from the
directories instead. </p>
<p>The JAR config source won't just take any relative path for
its default values; either the files are within the JAR, or it refuses to use
them. That is intentional behaviour for security and safety purposes.</p>
<p>You can activate <a href="15_test_mode.html">Test Mode</a>, however: In Test Mode, the relative paths are 
accepted (along with all the other directories test mode uses).</p>
<h2 id="143-use-a-config-scheme">1.4.3 Use a config scheme<a class="headerlink" href="#143-use-a-config-scheme" title="Permanent link">&para;</a></h2>
<h3 id="1431-reasons">1.4.3.1 Reasons<a class="headerlink" href="#1431-reasons" title="Permanent link">&para;</a></h3>
<p>There are some benefits to declaring the contents of your configurations
separately from the code.
- better maintenance (all in one place, instead of scattered)
- enables automated documentation (both runtime and compile-time), which is always up-to-date with the code, without extra work.
- type safety for your configuration parameters
- automatic parameter validation before your code gets the values.</p>
<p>Ideally, for a configuration there is just theme ConfigScheme you declared,
and the key names your code uses. Once the mConfig Configuration is instantiated,
the sole connection between the code and the values should be the keys it asks for.</p>
<p>(In the API, we stick with String keys for ease of use.
 If you want to be strict in your development, you can declare an enum and use
 its names as keys.)</p>
<h3 id="1432-normal-use">1.4.3.2 Normal use<a class="headerlink" href="#1432-normal-use" title="Permanent link">&para;</a></h3>
<p>Normally, you'll place a JSON file in a subfolder of your resource directory, 
and that's it. </p>
<p>The file name is the name of the Configuration you want to use,
plus the suffix ".scheme.json". It is a JSON(-style) file, following a specific
format (see <a href="23_configuration_schemes.html">Configuration Schemes</a>)</p>
<p>You declare all the configuration parameters your code can or will use.
mConfig will automatically detect and use these files.</p>
<p>Example: If your code uses a Configuration named "MyConfig" for
Company "MyCompany" and Application "MyApplication",
you would place the corresponding scheme file in
<code>src/main/resources/.config/MyCompany/MyApplication/MyConfig.scheme.json</code></p>
<h3 id="1433-explicit-setting">1.4.3.3 Explicit setting<a class="headerlink" href="#1433-explicit-setting" title="Permanent link">&para;</a></h3>
<p>If, for reasons whatsoever, you want to provide the configuration scheme yourself,
prepare the JSON string according to the format.
Convert it to a ConfigScheme
<code>ConfigScheme testScheme = ConfigScheme.statics.fromJSON(yourConfigSchemeString);</code>
and apply it to the respective Configuration
<code>cfg.setConfigScheme(testScheme);</code>.</p>
<p>Note: default values in your scheme will replace potentially existing defaults.</p>
<h2 id="144-runtime-dynamic-configurations">1.4.4 Runtime Dynamic Configurations<a class="headerlink" href="#144-runtime-dynamic-configurations" title="Permanent link">&para;</a></h2>
<p>Mutable Puts: you can change the values of existing entries at runtime.
Example:</p>
<pre><code class="language-java">configFactory.put(&quot;voting.database.name&quot;, &quot;dynamicDB&quot;, ConfigScope.RUNTIME);
</code></pre>
<p>The RUNTIME scope is at the highest priority ยน, so it overrides all others.</p>
<p>So dynamically changing the configuration at runtime is quite possible.</p>
<p>ยน: the highest priority of all regular scopes, that is. the POLICY scope
can enforce its settings over everything else; that's for security reasons.</p>
<h2 id="145-put-and-write">1.4.5 Put and write<a class="headerlink" href="#145-put-and-write" title="Permanent link">&para;</a></h2>
<p>Configurations can be written to; the put operation is the same for all scopes.
The puts are typed.
You can pick either a single scope, or an enum set of scopes.
When writing, mConfig follows the "principle of least surprise" when writing to a scope:
- If an entry for the key already exists in a writeable layer within the scope,
its contents are changed, and written.
- If no entry for the key exists in the scope yet, it is created and written,
if there is a writeable layer available within the scope or scopes specified.
- If no writeable layer is available in the scope, the put fails with an exception. No silent data loss.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="13_getting_started.html" class="btn btn-neutral float-left" title="1.3 Getting Started"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="15_test_mode.html" class="btn btn-neutral float-right" title="1.5 Test Mode">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="13_getting_started.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="15_test_mode.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>var base_url = ".";</script>
    <script src="js/theme_extra.js"></script>
    <script src="js/theme.js"></script>
      <script src="search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
